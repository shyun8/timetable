<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Next Class Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #fafafa;
      color: #2d2d2d;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
      box-sizing: border-box;
    }

    .container {
      text-align: center;
      background: #ffffff;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      max-width: 750px;
      width: 90%;
    }

    h1.status {
      font-size: 2.4rem;
      font-weight: 600;
      color: #1d3557;
      margin-bottom: 25px;
    }

    .time-left {
      font-size: 3rem;
      font-weight: 600;
      color: #e63946;
      margin-bottom: 20px;
    }

    .message {
      font-size: 1.6rem;
      font-weight: 400;
      color: #457b9d;
      margin-bottom: 30px;
    }

    .timetable {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin: 20px 0;
    }

    .timetable div {
      background-color: #1d3557;
      color: white;
      border-radius: 8px;
      padding: 15px 20px;
      font-size: 1rem;
      font-weight: 500;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer a {
      color: #2a9d8f;
      text-decoration: none;
      font-size: 1rem;
      font-weight: 500;
    }

    .footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="status" class="status">Loading...</h1>
    <div id="time-left" class="time-left">--시간 --분 --초</div>
    <div id="message" class="message">Please wait...</div>
    <div class="timetable" id="timetable"></div>
    <div class="footer">
      <a href="http://www.컴시간학생.kr">View Full Timetable</a>
    </div>
  </div>

  <script>
    // Timetable data
    const timetable = {
      Monday: ["Math", "Science", "History", "Art", "PE", "English", "Geography"],
      Tuesday: ["Biology", "Math", "Music", "History", "Computer Science", "English"],
      Wednesday: ["PE", "Art", "Math", "History", "English", "Science", "Music"],
      Thursday: ["Geography", "Biology", "English", "Math", "Science", "History"],
      Friday: ["Art", "PE", "Computer Science", "Music", "Math", "Science", "English"]
    };

    const periods = [
      { start: "08:40", end: "09:30" },
      { start: "09:40", end: "10:30" },
      { start: "10:40", end: "11:30" },
      { start: "11:40", end: "12:30" },
      { start: "13:40", end: "14:30" },
      { start: "14:40", end: "15:30" },
      { start: "15:40", end: "16:30" }
    ];

    const today = new Date();
    const day = today.toLocaleString("en-US", { weekday: "long" });
    const now = new Date();
    const isWeekend = ["Saturday", "Sunday"].includes(day);
    const classes = timetable[day] || [];
    const timetableEl = document.getElementById("timetable");
    const statusEl = document.getElementById("status");
    const timeLeftEl = document.getElementById("time-left");
    const messageEl = document.getElementById("message");

    // Helper to calculate time difference
    function getTimeDiff(time) {
      const [hour, minute] = time.split(":").map(Number);
      const totalMinutes = hour * 60 + minute;
      const nowMinutes = now.getHours() * 60 + now.getMinutes();
      return totalMinutes - nowMinutes;
    }

    // Render today's timetable
    function renderTimetable() {
      timetableEl.innerHTML = "";
      classes.forEach((cls, index) => {
        const periodEl = document.createElement("div");
        periodEl.innerHTML = `<span>Period ${index + 1}</span> <span>${cls}</span>`;
        timetableEl.appendChild(periodEl);
      });
    }

    // Update the status and time left
    function updateStatus() {
      const now = new Date();
      const nowMinutes = now.getHours() * 60 + now.getMinutes();
      const nowSeconds = now.getSeconds();
      let status = "이따 만나요!";
      let timeLeftMessage = "--시간 --분 --초";
      let nextClass = null;

      for (let i = 0; i < periods.length; i++) {
        const { start, end } = periods[i];
        const startDiff = getTimeDiff(start);
        const endDiff = getTimeDiff(end);

        if (startDiff <= 0 && endDiff > 0) {
          // During class
          status = `${classes[i]} 수업 진행 중`;
          timeLeftMessage = formatTime(endDiff * 60 - nowSeconds);
          messageEl.textContent = `${classes[i]} 종료까지 남은 시간`;
          break;
        } else if (startDiff > 0) {
          // Before next class
          status = "쉬는 시간 진행 중";
          timeLeftMessage = formatTime(startDiff * 60 - nowSeconds);
          nextClass = classes[i];
          messageEl.textContent = `${nextClass} 시작까지 남은 시간`;
          break;
        }
      }

      // Special cases
      if (getTimeDiff("12:30") <= 0 && getTimeDiff("13:40") > 0) {
        status = "점심시간 진행 중";
        timeLeftMessage = formatTime(getTimeDiff("13:40") * 60 - nowSeconds);
        messageEl.textContent = "다음 수업 시작까지 남은 시간";
      } else if (getTimeDiff("16:30") <= 0 || getTimeDiff("08:40") > 0) {
        status = "내일 만나요!";
        const nextDayTime = now.getHours() >= 16 ? "08:40" : "16:30";
        timeLeftMessage = formatTime(getTimeDiff(nextDayTime) * 60 - nowSeconds);
        messageEl.textContent = "새로운 하루를 준비하세요!";
      }

      statusEl.textContent = status;
      timeLeftEl.textContent = timeLeftMessage;
    }

    // Format time into "hh시간 mm분 ss초"
    function formatTime(seconds) {
      const h = Math.floor(seconds / 3600);
      const m = Math.floor((seconds % 3600) / 60);
      const s = seconds % 60;
      return `${h > 0 ? h + "시간 " : ""}${m}분 ${s}초`;
    }

    // Initialize the app
    renderTimetable();
    updateStatus();
    setInterval(updateStatus, 1000); // Update every second
  </script>
</body>
</html>



